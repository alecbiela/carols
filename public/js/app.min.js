/*! carols 02-12-2024 */
window.onload=(()=>{let d,a=parseInt(localStorage.getItem("currentsong"))||1,n=(localStorage.setItem("currentsong",a),{x0:0,y0:0,x1:0,y1:0}),c=!1;var e;let o=e=>{a=e.target.getAttribute("data-song-id"),l(a),t()},s=()=>{var e=a-1;l(e)},r=()=>{var e=a+1;l(e)},t=()=>{document.getElementById("navigation_wrapper").classList.toggle("nav-open")},i=(document.getElementById("song_select").addEventListener("click",t),document.getElementById("next_button").addEventListener("click",r),document.getElementById("prev_button").addEventListener("click",s),()=>new Promise(t=>{setTimeout(()=>{var e=document.querySelector(".song.exiting");e.classList.contains("left")?(e.classList.add("right"),e.classList.remove("left")):(e.classList.remove("right"),e.classList.add("left")),e.classList.add("staging"),e.classList.remove("exiting"),c=!1,t("done")},250)})),l=t=>{if(!0!==c){c=!0;var n=a,s=(a=parseInt(t),localStorage.setItem("currentsong",a),d[t-1].id+". "+d[t-1].name),o=d[t-1].lyrics,r=document.querySelector(".song.current");let e;(e=n>a?document.querySelector(".song.staging.left"):document.querySelector(".song.staging.right")).getElementsByClassName("song-title")[0].textContent=s,e.getElementsByClassName("song-lyrics")[0].innerHTML=o,r.classList.remove("current"),e.classList.remove("staging","right","left"),r.classList.add("exiting",n>a?"right":"left"),e.classList.add("current"),(async()=>{await i()})(),[...document.querySelectorAll(".song-button")].forEach(e=>{e.classList.remove("current-song","prev-song"),parseInt(e.getAttribute("data-song-id"))<t&&e.classList.add("prev-song")}),document.querySelector('.song-button[data-song-id="'+t+'"]').classList.add("current-song"),document.querySelector(".current-song").scrollIntoView(),window.scroll({top:0,left:0,behavior:"smooth"}),g()}},g=()=>{(1===a?(document.getElementById("prev_button").setAttribute("disabled","disabled"),document.getElementById("next_button")):(a===d.length?document.getElementById("next_button").setAttribute("disabled","disabled"):document.getElementById("next_button").removeAttribute("disabled"),document.getElementById("prev_button"))).removeAttribute("disabled")},u=(window.addEventListener("touchstart",e=>{n.x0=e.changedTouches[0].screenX,n.y0=e.changedTouches[0].screenY}),window.addEventListener("touchend",e=>{n.x1=e.changedTouches[0].screenX,n.y1=e.changedTouches[0].screenY,u()}),()=>{var e=n.x1-n.x0,t=n.y1-n.y0;Math.abs(t)<100&&(50<e&&1!==a?s():e<-50&&a!==d.length&&r())});(e=new XMLHttpRequest).onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=(d=JSON.parse(this.responseText).songs)[a-1].id+". "+d[a-1].name,t=d[a-1].lyrics;document.querySelector(".song.current .song-title").textContent=e,document.querySelector(".song.current .song-lyrics").innerHTML=t,1===d.length&&(document.getElementById("next_button").setAttribute("disabled","disabled"),document.getElementById("prev_button").setAttribute("disabled","disabled"));for(let e=0;e<d.length;e++){var n=document.createElement("li"),s=(n.classList="song-nav-item",document.createElement("button"));s.setAttribute("type","button"),s.setAttribute("data-song-id",d[e].id),s.textContent=d[e].id+". "+d[e].name,s.addEventListener("click",o),a>d[e].id?s.classList="song-button prev-song":a<d[e].id?s.classList="song-button":s.classList="song-button current-song",n.appendChild(s),document.querySelector(".song-navigation").appendChild(n)}document.querySelector(".current-song").scrollIntoView(),g()}},e.open("GET","data/songs.json",!0),e.send()})();